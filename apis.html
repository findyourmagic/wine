<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
<meta charset='utf-8'>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="renderer" content="webkit">
<meta name="description" content="Wine.js" />
<meta name="keywords" content="Wine.js"/>
<meta name="author" content="daniel, findyourmagic@foxmail.com" /> <!-- 网页作者 -->
<meta name ="viewport" width="device-width" content ="initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no">
<link rel="stylesheet" href="./static/style.css">
<link rel="stylesheet" href="http://cdn.staticfile.org/highlight.js/8.3/styles/paraiso.light.min.css">
<title>Wine.js</title>
</head>
<body>
<dl class="logo">
	<dt>
		<p>WINE.JS</p>
		<p><img src="./static/logo.png" alt=""></p>
	</dt>
	<dd>Keep simple</dd>
	<dd>A javascript user interface library based on jQuery</dd>
</dl>
<div class="layout"><ul class="nav">
    
    	
        	<li><a href="index.html">关于Wine.js</a></li>
        
    
    	
        	<li><a href="howtouse.html">快速入门</a></li>
        
    
    	
        	<li><a href="apis.html">API文档</a></li>
        
    
    	
        	<li><a href="https://github.com/wiwide-developer/winejs" target="_blank">github</a></li>
        
    
</ul>
<h1 id="api">API</h1>
<h2 id="wine">Wine</h2>
<h3 id="-fn-wine-init-">$.fn.wine(init);</h3>
<p>声明Wine对象</p>
<p><strong>参数(可选):</strong></p>
<p>Wine的init函数,会在第一次渲染之前执行</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> presenter = $(dom).wine(init);
</code></pre>
<h3 id="settemplate-template-html-">setTemplate(&#39;template HTML&#39;)</h3>
<p>设置EJS模版</p>
<p><strong>参数(必选):</strong></p>
<p>参数为模版文本</p>
<pre><code class="lang-javascript">presenter.setTemplate('<span class="hljs-keyword">template</span> <span class="hljs-type">HTML</span>')
</code></pre>
<h3 id="value-data-">value(data)</h3>
<p>给Wine对象赋值,可以通过 presenter.data 访问</p>
<p><strong>参数(必选):</strong></p>
<p>json数据</p>
<pre><code class="lang-javascript"><span class="hljs-title">presenter</span>.value(<span class="hljs-typedef"><span class="hljs-keyword">data</span>);</span>
</code></pre>
<h3 id="beforevalue-fn-">beforeValue(fn)</h3>
<p>给presenter赋值之前执行fn</p>
<p><strong>参数(必选):</strong></p>
<p>赋值之前执行的函数</p>
<pre><code class="lang-javascript">presenter.beforeValue(<span class="hljs-keyword">fn</span>);
</code></pre>
<h3 id="aftervalue-fn-">afterValue(fn)</h3>
<p>给presenter赋值之后执行fn</p>
<p><strong>参数(必选):</strong></p>
<p>赋值之后执行的函数</p>
<pre><code class="lang-javascript">presenter.afterValue(<span class="hljs-keyword">fn</span>);
</code></pre>
<h3 id="render-">render()</h3>
<p>对Wine对象渲染，请勿和form()方法混用</p>
<pre><code class="lang-javascript">presenter.<span class="hljs-function"><span class="hljs-title">render</span><span class="hljs-params">()</span></span>
</code></pre>
<h3 id="form-">form()</h3>
<p>使调用声明函数并给form表单赋值，请勿和render()方法混用</p>
<pre><code class="lang-javascript">presenter.wine(<span class="hljs-keyword">function</span>(){
    // init 函数会在第一次调用form表单时执行    
})
.value({<span class="hljs-keyword">...</span>}) // 赋值 必需
.setValidate([<span class="hljs-keyword">...</span>]) // 设置验证规则 选填
.form();
</code></pre>
<h3 id="beforerender-fn-">beforeRender(fn)</h3>
<p>在渲染presenter中的数据之前执行fn</p>
<p><strong>参数(必选):</strong></p>
<p>在渲染presenter中的数据之前执行的函数</p>
<pre><code class="lang-javascript">presenter.beforeRender(<span class="hljs-keyword">fn</span>);
</code></pre>
<h3 id="afterrender-fn-">afterRender(fn)</h3>
<p>在渲染presenter中的数据之后执行fn</p>
<p><strong>参数(必选):</strong></p>
<p>在渲染presenter中的数据之后执行的函数</p>
<pre><code class="lang-javascript">presenter.afterRender(<span class="hljs-keyword">fn</span>);
</code></pre>
<h3 id="binding-attributename-function-obj-element-old-old-value-value-path-path-">binding({ attributeName:function({ $obj : element , old : old , value : value , path : path}){} })</h3>
<p>给wine-bind表单元素绑定事件，其中this为当前wine对象</p>
<p><strong>参数(必选):</strong></p>
<p>格式:{ attributeName: callback, attributeName1: callback1 ... }</p>
<p>类型:json</p>
<p>attributeName:用wine-bind给表单元素绑定presenter中data的值</p>
<p>callback:在绑定wine-bind的表单元素触发change事件时调用callback函数</p>
<p>callback arguments:</p>
<ul>
<li>$obj:表单元素对应的jQuery对象</li>
<li>old:表单元素触发change事件之前的值</li>
<li>value:表单元素触发change事件之后的值</li>
<li>path:attribute相对于presenter中data对象的路径</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-tag">presenter</span><span class="hljs-class">.binding</span>({
    <span class="hljs-tag">attribute</span> : <span class="hljs-tag">function</span>(argu){
        <span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(argu);
        <span class="hljs-comment">//    { </span>
        <span class="hljs-comment">//        $obj : element,</span>
        <span class="hljs-comment">//        old : old,</span>
        <span class="hljs-comment">//        value : value,</span>
        <span class="hljs-comment">//        path : path</span>
        <span class="hljs-comment">//    }</span>
    }

});
</code></pre>
<h3 id="unbinding-str-array-">unbinding( str|array )</h3>
<p>给Wine-bind表单元素解绑，参数为字符串或者数组</p>
<p><strong>参数(必选):</strong></p>
<p>对应binding参数中的attributeName</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">presenter</span>.<span class="hljs-function">unbinding</span>(<span class="hljs-string">'name'</span>);
</code></pre>
<h3 id="setvalidate-">setValidate()</h3>
<p>设置验证规则</p>
<pre><code class="lang-javascript">presenter
.setValidate([
    { <span class="hljs-comment">// 验证规则1</span>
        name : <span class="hljs-string">'key'</span>,
        rule : /^\d$/,
        success : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data, <span class="hljs-variable">$input</span> )</span></span>{ <span class="hljs-comment">// data 为表单元素内当前值，$input为对应当前表单元素的jQuery对象</span>
            <span class="hljs-comment">// this 指向当前的wine对象 即当前presenter</span>
            <span class="hljs-comment">// 验证成功时执行</span>
        },
        fail : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data, <span class="hljs-variable">$input</span> )</span></span>{
            <span class="hljs-comment">// 验证失败时执行</span>
        }
    },
    { <span class="hljs-comment">// 验证规则2</span>

    }
])
</code></pre>
<h3 id="validate-">validate()</h3>
<p>验证某个属性或者全部属性</p>
<pre><code class="lang-javascript">// 验证name属性对应的验证规则，验证成功则调用验证规则中success函数并返回<span class="hljs-literal">true</span>，否则调用fail且返回<span class="hljs-literal">false</span>
presenter
.validate(<span class="hljs-string">'name'</span>);
</code></pre>
<pre><code class="lang-javascript">// 按顺序验证全部验证规则，验证成功则调用验证规则中success函数并返回<span class="hljs-literal">true</span>，否则调用第一个验证失败的fail函数且返回<span class="hljs-literal">false</span>
presenter
.validate()<span class="hljs-comment">;</span>
</code></pre>
<h3 id="watch-eventname-callback-">watch({eventName:callback})</h3>
<p>订阅事件</p>
<p><strong>参数(必选):</strong></p>
<p>格式:{ eventName: callback, eventName1: callback1 ... }</p>
<p>类型:json</p>
<p>eventName:订阅事件名,支持通配符&#39;*&#39;</p>
<p>callback:指定事件回调函数,如果在trigger时传递了数据可以在callback函数中获取到</p>
<pre><code class="lang-javascript"><span class="hljs-tag">presenter</span><span class="hljs-class">.watch</span>({'<span class="hljs-attribute">eventName</span>':callback});
</code></pre>
<h3 id="detach">detach</h3>
<p>取消订阅</p>
<p><strong>参数(必选):</strong></p>
<p>格式:[event, event1 ...]</p>
<p>类型:数组</p>
<p>已经订阅过的事件名</p>
<pre><code class="lang-javascript"><span class="hljs-attribute">presenter</span>.<span class="hljs-function">detach</span>([<span class="hljs-string">'eventName'</span>,<span class="hljs-string">'eventName1'</span>]);
</code></pre>
<h2 id="-">工具函数</h2>
<h3 id="-wine-extend-presenter-element-">$.Wine.extend(presenter, $element);</h3>
<p>从已经建立的presenter生成新的presenter</p>
<p><strong>参数(必选)</strong></p>
<p>presenter:需要被继承的presenter</p>
<p>$element:生成的presenter关联的jQuery对象</p>
<h3 id="-wine-trigger-eventname-data-">$.Wine.trigger(eventName, data)</h3>
<p>触发订阅的事件</p>
<p><strong>参数</strong></p>
<p>eventName:需要触发的事件</p>
<p>data:传递给订阅函数的参数数据</p>
</div>
<div class="footer">
<p>WINE.JS | Keep simple © <a href="http://www.wiwide.com/" target="_blank">迈外迪 | Wiwide.com</a></p>
</div>
</body>
</html>












